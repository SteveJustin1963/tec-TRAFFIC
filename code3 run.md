```
:I
  0 d!
  0 p!
  0 t!
  0 e!
  0 q!
;

:T
  t 1 + t!
;

:R
  0 t!
;

:D
  d 0 = ( 1 d! ) /E ( 0 d! )
;

:U
  e 0 = (
    p 0 = t 30 > t 30 = | & ( 1 p! 0 t! )
    p 1 = t 5 > t 5 = | & ( 2 p! 0 t! )
    p 2 = t 2 > t 2 = | & ( 0 p! D 0 t! )
  )
;

:E
  e 1 = (
    0 p!
    q d!
    0 t!
  )
;

:V
  d 0 = (
    p 0 = ( `NS G  EW R ` )
    /E p 1 = ( `NS Y  EW R ` )
    /E ( `NS R  EW R ` )
  )
  /E (
    p 0 = ( `EW G  NS R ` )
    /E p 1 = ( `EW Y  NS R ` )
    /E ( `EW R  NS R ` )
  )
;

:P
  d 0 = (
    p 0 = (
      t 20 < ( `NS WALK  EW DW ` )
      /E t 30 < ( `NS FLASH  EW DW ` )
      /E ( `NS DW  EW DW ` )
    )
    /E ( `NS DW  EW DW ` )
  )
  /E (
    p 0 = (
      t 20 < ( `EW WALK  NS DW ` )
      /E t 30 < ( `EW FLASH  NS DW ` )
      /E ( `EW DW  NS DW ` )
    )
    /E ( `EW DW  NS DW ` )
  )
;

:M
  /U(
    e 1 = ( E ) /E ( U V P )
    1 (T)

```
  )
;
